<!DOCTYPE html>
<head xmlns:th="http://www.w3.org/1999/xhtml">
    <meta charset="UTF-8">
    <title>Title</title>
    <link rel="stylesheet" th:href="@{./../static/lib/layui/css/layui.css}">
    <script type="text/javascript" th:src="@{./../static/js/echarts.min.js}"></script>
    <script type="text/javascript" th:src="@{./../static/js/jquery-3.4.1.min.js}"></script>
    <script th:src="@{./../static/lib/layui/layui.js}" charset="utf-8"></script>
    <style>
        body {
            background-color: #2C3E50;
        }

        #main,
        #main1,
        #main2,
        #main3,
        #main4,
        #main5 {

            width: 100%;
            height: 180px;
            margin-bottom: -22px;
        }
    </style>
</head>
<body>
<div class="layui-fluid layui-form">
    <br/>
    <div class="layui-row">
        <div class="layui-col-sm1  layui-col-sm-offset5" style="margin-top: 3px">
            <div class="layui-input-inline">
                <label for="userId"></label>
                <select name="userId" id="userId" lay-verify="required" lay-filter="college">

                </select>
            </div>
        </div>
        <div class="layui-col-sm6">
            <h1 style="font-size: 35px;color: #FFFFFF;">销售仪表盘</h1>
        </div>
    </div>

    <div class="layui-row">
        <!-- 销售业绩部分 -->
        <div class="layui-col-sm6" style="border-bottom:8px solid #94A0B2; border-right: 4px solid #94A0B2;">
            <div class="layui-row">
                <div class="layui-col-sm12">
                    <div class="layui-form-item" style="margin-bottom: -2px">
                        <label class="layui-form-label" style="font-size: 20px;color: #FFFFFF">销售业绩</label>
                        <div class="layui-input-block" style="color:#4488BB">
                            <input type="radio" name="hood" lay-filter="hooder" value="订单+合同" title="订单+合同" checked>
                            <input type="radio" name="hood" lay-filter="hooder" value="订单" title="订单">
                            <input type="radio" name="hood" lay-filter="hooder" value="合同" title="合同">
                        </div>
                    </div>
                </div>
            </div>
            <!-- 销售业绩仪表盘 -->
            <div class="layui-row">
                <div class="layui-col-sm4">
                    <div id="main"></div>
                </div>
                <div class="layui-col-sm4">
                    <div id="main1"></div>
                </div>
                <div class="layui-col-sm4">
                    <div id="main2"></div>
                </div>
            </div>
            <div class="layui-row">
                <div class="layui-col-sm4" style="text-align:center; color: #FFFFFF;">
                    <div>本月签约完成率</div>
                </div>
                <div class="layui-col-sm4" style="text-align:center;  color: #FFFFFF;">
                    <div>本季签约完成率</div>
                </div>
                <div class="layui-col-sm4" style="text-align:center;  color: #FFFFFF;">
                    <div>本年签约完成率</div>
                </div>
            </div>
            <div class="layui-row">
                <div class="layui-col-sm12">
                    <div id="statistical" style="width: 100%;height:220px; margin-bottom: -25px;"></div>
                </div>
            </div>
        </div>

        <!-- 回款业绩部分 -->
        <div class="layui-col-sm6" style="border-bottom:8px solid #94A0B2; border-left: 4px solid #94A0B2;">
            <div class="layui-row">
                <div class="layui-col-sm2 layui-col-sm-offset10">
                    <div>
                        <label class="layui-form-label" style="font-size: 20px;color: #FFFFFF">回款业绩</label>
                    </div>
                </div>
            </div>
            <!-- 回款业绩仪表盘 -->
            <div class="layui-row">
                <div class="layui-col-sm4">
                    <div id="main3"></div>
                </div>
                <div class="layui-col-sm4">
                    <div id="main4"></div>
                </div>
                <div class="layui-col-sm4">
                    <div id="main5"></div>
                </div>
            </div>
            <div class="layui-row">
                <div class="layui-col-sm4" style="text-align:center; color: #FFFFFF;">
                    <div>本月回款完成率</div>
                </div>
                <div class="layui-col-sm4" style="text-align:center;  color: #FFFFFF;">
                    <div>本季回款完成率</div>
                </div>
                <div class="layui-col-sm4" style="text-align:center;  color: #FFFFFF;">
                    <div>本年回款完成率</div>
                </div>
            </div>
            <div class="layui-row">
                <div class="layui-col-sm12">
                    <div id="statistical1" style="width: 100%;height:220px; margin-bottom: -27px;"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="layui-row">
        <!-- 销售预测漏斗图 -->
        <div class="layui-col-sm4" style="border-right: 4px solid #94A0B2;">
            <div id="chart1" style="width: 100%;height:300px;"></div>
        </div>
        <!-- 每月销售勤奋度统计图 -->
        <div class="layui-col-sm8" style="border-left: 4px solid #94A0B2;">
            <div id="diligence" style="width: 100%;height:300px; "></div>
        </div>
    </div>
</div>
<script type="text/javascript">



    $(document).ready(function () {
        uploadSel();

    });
    layui.use(['element','form'], function(){
        let form = layui.form;
        form.on('select(college)', function () {
            let selUser = $("#userId option:selected").val();
            let selHood =  $("input[name='hood']:checked").val();
            selStatic(selUser);
            selStaticSale(selUser,selHood);
        });
        form.on('radio(hooder)', function(data){
            let selUser = $("#userId option:selected").val();
            let selHood =  $("input[name='hood']:checked").val();
            selStaticSale(selUser,selHood);
        });
    });
    function selStatic(selUser){
        $.ajax({
            url:'../salesmanInstrument/staticResult',
            type:'post',
            data: {
                userId:selUser

            },
            dataType :'json',
            success : function(data) {
                let listSaleForecasting = [];
                let listSales1 =[];//机会跟进数
                let listSales2 =[];//线索跟进数
                let listSales3 =[];//客户跟进数
                let listSales4 =[];//机会增加数
                let listSales5 =[];//线索增加数
                let listSales6 =[];//客户增加数
                //月度回款统计图
                let listReceivePlan =[];//计划值
                let listReceiveComplete=[];//完成值
                listReceivePlan.push((data["receiveMonthAvgPlan"]["a1"]).toFixed(2));
                listReceivePlan.push((data["receiveMonthAvgPlan"]["a2"]).toFixed(2));
                listReceivePlan.push((data["receiveMonthAvgPlan"]["a3"]).toFixed(2));
                listReceivePlan.push((data["receiveMonthAvgPlan"]["a4"]).toFixed(2));
                listReceivePlan.push((data["receiveMonthAvgPlan"]["a5"]).toFixed(2));
                listReceivePlan.push((data["receiveMonthAvgPlan"]["a6"]).toFixed(2));
                listReceivePlan.push((data["receiveMonthAvgPlan"]["a7"]).toFixed(2));
                listReceivePlan.push((data["receiveMonthAvgPlan"]["a8"]).toFixed(2));
                listReceivePlan.push((data["receiveMonthAvgPlan"]["a9"]).toFixed(2));
                listReceivePlan.push((data["receiveMonthAvgPlan"]["a10"]).toFixed(2));
                listReceivePlan.push((data["receiveMonthAvgPlan"]["a11"]).toFixed(2));
                listReceivePlan.push((data["receiveMonthAvgPlan"]["a12"]).toFixed(2));

                listReceiveComplete.push((data["receiveMonthAvgTrue"]["a1"]).toFixed(2));
                listReceiveComplete.push((data["receiveMonthAvgTrue"]["a2"]).toFixed(2));
                listReceiveComplete.push((data["receiveMonthAvgTrue"]["a3"]).toFixed(2));
                listReceiveComplete.push((data["receiveMonthAvgTrue"]["a4"]).toFixed(2));
                listReceiveComplete.push((data["receiveMonthAvgTrue"]["a5"]).toFixed(2));
                listReceiveComplete.push((data["receiveMonthAvgTrue"]["a6"]).toFixed(2));
                listReceiveComplete.push((data["receiveMonthAvgTrue"]["a7"]).toFixed(2));
                listReceiveComplete.push((data["receiveMonthAvgTrue"]["a8"]).toFixed(2));
                listReceiveComplete.push((data["receiveMonthAvgTrue"]["a9"]).toFixed(2));
                listReceiveComplete.push((data["receiveMonthAvgTrue"]["a10"]).toFixed(2));
                listReceiveComplete.push((data["receiveMonthAvgTrue"]["a11"]).toFixed(2));
                listReceiveComplete.push((data["receiveMonthAvgTrue"]["a12"]).toFixed(2));

                //销售预测
                listSaleForecasting.push(data["saleForecasting1"]);
                listSaleForecasting.push(data["saleForecasting2"]);
                listSaleForecasting.push(data["saleForecasting3"]);
                listSaleForecasting.push(data["saleForecasting4"]);
                listSaleForecasting.push(data["saleForecasting5"]);
                listSaleForecasting.push(data["saleForecasting6"]);

                listSales1.push(data["countSales1"]["a1"]);
                listSales1.push(data["countSales1"]["a2"]);
                listSales1.push(data["countSales1"]["a3"]);
                listSales1.push(data["countSales1"]["a4"]);
                listSales1.push(data["countSales1"]["a5"]);
                listSales1.push(data["countSales1"]["a6"]);
                listSales1.push(data["countSales1"]["a7"]);
                listSales1.push(data["countSales1"]["a8"]);
                listSales1.push(data["countSales1"]["a9"]);
                listSales1.push(data["countSales1"]["a10"]);
                listSales1.push(data["countSales1"]["a11"]);
                listSales1.push(data["countSales1"]["a12"]);


                listSales2.push(data["countSales2"]["a1"]);
                listSales2.push(data["countSales2"]["a2"]);
                listSales2.push(data["countSales2"]["a3"]);
                listSales2.push(data["countSales2"]["a4"]);
                listSales2.push(data["countSales2"]["a5"]);
                listSales2.push(data["countSales2"]["a6"]);
                listSales2.push(data["countSales2"]["a7"]);
                listSales2.push(data["countSales2"]["a8"]);
                listSales2.push(data["countSales2"]["a9"]);
                listSales2.push(data["countSales2"]["a10"]);
                listSales2.push(data["countSales2"]["a11"]);
                listSales2.push(data["countSales2"]["a12"]);


                listSales3.push(data["countSales3"]["a1"]);
                listSales3.push(data["countSales3"]["a2"]);
                listSales3.push(data["countSales3"]["a3"]);
                listSales3.push(data["countSales3"]["a4"]);
                listSales3.push(data["countSales3"]["a5"]);
                listSales3.push(data["countSales3"]["a6"]);
                listSales3.push(data["countSales3"]["a7"]);
                listSales3.push(data["countSales3"]["a8"]);
                listSales3.push(data["countSales3"]["a9"]);
                listSales3.push(data["countSales3"]["a10"]);
                listSales3.push(data["countSales3"]["a11"]);
                listSales3.push(data["countSales3"]["a12"]);


                listSales4.push(data["countSales4"]["a1"]);
                listSales4.push(data["countSales4"]["a2"]);
                listSales4.push(data["countSales4"]["a3"]);
                listSales4.push(data["countSales4"]["a4"]);
                listSales4.push(data["countSales4"]["a5"]);
                listSales4.push(data["countSales4"]["a6"]);
                listSales4.push(data["countSales4"]["a7"]);
                listSales4.push(data["countSales4"]["a8"]);
                listSales4.push(data["countSales4"]["a9"]);
                listSales4.push(data["countSales4"]["a10"]);
                listSales4.push(data["countSales4"]["a11"]);
                listSales4.push(data["countSales4"]["a12"]);


                listSales5.push(data["countSales5"]["a1"]);
                listSales5.push(data["countSales5"]["a2"]);
                listSales5.push(data["countSales5"]["a3"]);
                listSales5.push(data["countSales5"]["a4"]);
                listSales5.push(data["countSales5"]["a5"]);
                listSales5.push(data["countSales5"]["a6"]);
                listSales5.push(data["countSales5"]["a7"]);
                listSales5.push(data["countSales5"]["a8"]);
                listSales5.push(data["countSales5"]["a9"]);
                listSales5.push(data["countSales5"]["a10"]);
                listSales5.push(data["countSales5"]["a11"]);
                listSales5.push(data["countSales5"]["a12"]);


                listSales6.push(data["countSales6"]["a1"]);
                listSales6.push(data["countSales6"]["a2"]);
                listSales6.push(data["countSales6"]["a3"]);
                listSales6.push(data["countSales6"]["a4"]);
                listSales6.push(data["countSales6"]["a5"]);
                listSales6.push(data["countSales6"]["a6"]);
                listSales6.push(data["countSales6"]["a7"]);
                listSales6.push(data["countSales6"]["a8"]);
                listSales6.push(data["countSales6"]["a9"]);
                listSales6.push(data["countSales6"]["a10"]);
                listSales6.push(data["countSales6"]["a11"]);
                listSales6.push(data["countSales6"]["a12"]);

                //回款业绩
                showInstrumentPanelRec1(data["receiveMonthData"]);
                showInstrumentPanelRec2(data["receiveQuarterData"]);
                showInstrumentPanelRec3(data["receiveYearData"]);

                // showHistogramRec(data["getYearPercentage"]);
                showHistogramRec(listReceivePlan,listReceiveComplete);
                showSaleForecasting(listSaleForecasting);
                showSaleDiligent(listSales1,listSales2,listSales3,listSales4,listSales5,listSales6);
            },
            error : function() {
                layer.msg('ajax执行错误！', {
                    icon : 2,
                    time : 1000
                });
            }
        });
    }
    function selStaticSale(selUser,selHood){
        $.ajax({
            url:'../salesmanInstrument/staticResultSale',
            type:'post',
            data: {
                userId:selUser,
                hood:selHood
            },
            dataType :'json',
            success : function(data) {
                //月度销售统计图
                let listSalePlan =[];//计划值
                let listSaleComplete=[];//完成值
                listSalePlan.push((data["saleMonthAvgPlan"]["a1"]).toFixed(2));
                listSalePlan.push((data["saleMonthAvgPlan"]["a2"]).toFixed(2));
                listSalePlan.push((data["saleMonthAvgPlan"]["a3"]).toFixed(2));
                listSalePlan.push((data["saleMonthAvgPlan"]["a4"]).toFixed(2));
                listSalePlan.push((data["saleMonthAvgPlan"]["a5"]).toFixed(2));
                listSalePlan.push((data["saleMonthAvgPlan"]["a6"]).toFixed(2));
                listSalePlan.push((data["saleMonthAvgPlan"]["a7"]).toFixed(2));
                listSalePlan.push((data["saleMonthAvgPlan"]["a8"]).toFixed(2));
                listSalePlan.push((data["saleMonthAvgPlan"]["a9"]).toFixed(2));
                listSalePlan.push((data["saleMonthAvgPlan"]["a10"]).toFixed(2));
                listSalePlan.push((data["saleMonthAvgPlan"]["a11"]).toFixed(2));
                listSalePlan.push((data["saleMonthAvgPlan"]["a12"]).toFixed(2));

                listSaleComplete.push((data["saleMonthAvgTrue"]["a1"]).toFixed(2));
                listSaleComplete.push((data["saleMonthAvgTrue"]["a2"]).toFixed(2));
                listSaleComplete.push((data["saleMonthAvgTrue"]["a3"]).toFixed(2));
                listSaleComplete.push((data["saleMonthAvgTrue"]["a4"]).toFixed(2));
                listSaleComplete.push((data["saleMonthAvgTrue"]["a5"]).toFixed(2));
                listSaleComplete.push((data["saleMonthAvgTrue"]["a6"]).toFixed(2));
                listSaleComplete.push((data["saleMonthAvgTrue"]["a7"]).toFixed(2));
                listSaleComplete.push((data["saleMonthAvgTrue"]["a8"]).toFixed(2));
                listSaleComplete.push((data["saleMonthAvgTrue"]["a9"]).toFixed(2));
                listSaleComplete.push((data["saleMonthAvgTrue"]["a10"]).toFixed(2));
                listSaleComplete.push((data["saleMonthAvgTrue"]["a11"]).toFixed(2));
                listSaleComplete.push((data["saleMonthAvgTrue"]["a12"]).toFixed(2));

                showInstrumentPanelSale1(data["saleMonthData"],selHood);
                showInstrumentPanelSale2(data["saleQuarterData"],selHood);
                showInstrumentPanelSale3(data["saleYearData"],selHood);
                showHistogramSale(listSalePlan,listSaleComplete,selHood);
            },
            error : function() {
                layer.msg('ajax执行错误！', {
                    icon : 2,
                    time : 1000
                });
            }
        });
    }
    /**
     * 下拉列表绑定
     */
    function uploadSel(){
        $.ajax({
            url: '../salesmanInstrument/listUsers',
            dataType: 'json',
            data:{'state': 0},	//查询状态为正常的所有机构类型
            type: 'get',
            success: function (data) {
                $.each(data.data, function (index, user) {
                    //$('#temp').append(new Option(item.name, item.id));// 下拉菜单里添加元素
                    let txt2= null;
                    if(index===0){
                        txt2=$("<option selected value='"+user["pkUserId"]+"'></option>").text(user["userName"]);
                    }else {
                        txt2=$("<option value='"+user["pkUserId"]+"'></option>").text(user["userName"]);
                    }
                    $('#userId').append(txt2);
                });
                let selUser = $("#userId option:selected").val();
                let selHood =  $("input[name='hood']:checked").val();
                selStatic(selUser);
                selStaticSale(selUser,selHood);
                layui.form.render("select");

            }
        });
    }
    /**
     * 本月签约完成仪表盘
     */
    function showInstrumentPanelSale1(saleMonthData,selHood){
        // 基于准备好的dom，初始化echarts实例
        let myChart = echarts.init(document.getElementById('main'));
        // 指定图表的配置项和数据
       let option = {
           tooltip: {
               formatter: "{a} <br/>{b} : {c}%"
           },
           toolbox: {
               feature: {
                   restore: {},
                   saveAsImage: {}
               }
           },
           series: [{
               name: '完成额',
               type: 'gauge',
               detail: {
                   offsetCenter: [0, "80%"],    //设置仪表盘下方显示内容位置
                   formatter: '{value}%',
                   textStyle: {color: 'white', fontSize: 20, top: 10}
               },
               title: {               //设置仪表盘中间显示文字样式
                   textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                       fontSize: 10,
                       color: "#4488BB",
                       fontStyle: 'italic',
                   }
               },
               data: [{value: 50, name: selHood}],
               center: ["47%", "45%"], // 默认全局居中
               splitLine: {           //分割线样式（及10、20等长线样式）
                   length: 15,
                   lineStyle: {            // 分隔线样式。
                       color: "#eee",              //线的颜色,默认 #eee。
                       opacity: 1,                 //图形透明度。支持从 0 到 1 的数字，为 0 时不绘制该图形。
                       width: 2,                   //线度,默认 2。
                       type: "solid",              //线的类型,默认 solid。 此外还有 dashed,dotted
                       shadowBlur: 10,             //(发光效果)图形阴影的模糊大小。该属性配合 shadowColor,shadowOffsetX, shadowOffsetY 一起设置图形的阴影效果。
                       shadowColor: "#fff",        //阴影颜色。支持的格式同color。
                   }
               },
               pointer: { //指针样式
                   length: '80%'
               },
               axisLine: {
                   show: true,// 是否显示仪表盘轴线(轮廓线),默认 true。
                   lineStyle: { // 属性lineStyle控制线条样式
                       shadowBlur: 10,             //(发光效果)图形阴影的模糊大小。该属性配合 shadowColor,shadowOffsetX, shadowOffsetY 一起设置图形的阴影效果。
                       shadowColor: "#fff",        //阴影颜色。支持的格式同color。
                       width: 12//表盘宽度
                   }
               }
           }]
       };


        option.series[0].data[0].value =(saleMonthData["completeValue"]*100).toFixed(2);
            myChart.setOption(option, true);
    }
    /**
     * 本季签约完成仪表盘
     */

    function showInstrumentPanelSale2(saleQuarterData,selHood){
        // 基于准备好的dom，初始化echarts实例
        let myChart1 = echarts.init(document.getElementById('main1'));
        // 指定图表的配置项和数据
        let option = {
            tooltip: {
                formatter: "{a} <br/>{b} : {c}%"
            },
            toolbox: {
                feature: {
                    restore: {},
                    saveAsImage: {}
                }
            },
            series: [{
                name: '完成额',
                type: 'gauge',
                detail: {
                    offsetCenter: [0, "80%"],    //设置仪表盘下方显示内容位置
                    formatter: '{value}%',
                    textStyle: {color: 'white', fontSize: 20, top: 10}
                },
                title: {               //设置仪表盘中间显示文字样式
                    textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                        fontSize: 10,
                        color: "#4488BB",
                        fontStyle: 'italic',
                    }
                },
                data: [{value: 60, name: selHood}],
                center: ["47%", "45%"], // 默认全局居中
                splitLine: {           //分割线样式（及10、20等长线样式）
                    length: 15,
                    lineStyle: {            // 分隔线样式。
                        color: "#eee",              //线的颜色,默认 #eee。
                        opacity: 1,                 //图形透明度。支持从 0 到 1 的数字，为 0 时不绘制该图形。
                        width: 2,                   //线度,默认 2。
                        type: "solid",              //线的类型,默认 solid。 此外还有 dashed,dotted
                        shadowBlur: 10,             //(发光效果)图形阴影的模糊大小。该属性配合 shadowColor,shadowOffsetX, shadowOffsetY 一起设置图形的阴影效果。
                        shadowColor: "#fff",        //阴影颜色。支持的格式同color。
                    }
                },
                pointer: { //指针样式
                    length: '80%'
                },
                axisLine: {
                    show: true,// 是否显示仪表盘轴线(轮廓线),默认 true。
                    lineStyle: { // 属性lineStyle控制线条样式
                        shadowBlur: 10,             //(发光效果)图形阴影的模糊大小。该属性配合 shadowColor,shadowOffsetX, shadowOffsetY 一起设置图形的阴影效果。
                        shadowColor: "#fff",        //阴影颜色。支持的格式同color。
                        width: 12//表盘宽度
                    }
                }
            }]
        };


        option.series[0].data[0].value =(saleQuarterData["completeValue"]*100).toFixed(2);
            myChart1.setOption(option, true);

    }
    /**
     * 本年签约完成仪表盘
     */
    function showInstrumentPanelSale3(saleYearData,selHood){
        // 基于准备好的dom，初始化echarts实例
        let myChart2 = echarts.init(document.getElementById('main2'));
        // 指定图表的配置项和数据
        let option={
            tooltip: {
                formatter: "{a} <br/>{b} : {c}%"
            },
            toolbox: {
                feature: {
                    restore: {},
                    saveAsImage: {}
                }
            },
            series: [{
                name: '完成额',
                type: 'gauge',
                detail: {
                    offsetCenter: [0, "80%"],    //设置仪表盘下方显示内容位置
                    formatter: '{value}%',
                    textStyle: {color: 'white', fontSize: 20, top: 10}
                },
                title: {               //设置仪表盘中间显示文字样式
                    textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                        fontSize: 10,
                        color: "#4488BB",
                        fontStyle: 'italic',
                    }
                },
                data: [{value: 70, name: selHood}],
                center: ["47%", "45%"], // 默认全局居中
                splitLine: {           //分割线样式（及10、20等长线样式）
                    length: 15,
                    lineStyle: {            // 分隔线样式。
                        color: "#eee",              //线的颜色,默认 #eee。
                        opacity: 1,                 //图形透明度。支持从 0 到 1 的数字，为 0 时不绘制该图形。
                        width: 2,                   //线度,默认 2。
                        type: "solid",              //线的类型,默认 solid。 此外还有 dashed,dotted
                        shadowBlur: 10,             //(发光效果)图形阴影的模糊大小。该属性配合 shadowColor,shadowOffsetX, shadowOffsetY 一起设置图形的阴影效果。
                        shadowColor: "#fff",        //阴影颜色。支持的格式同color。
                    }
                },
                pointer: { //指针样式
                    length: '80%'
                },
                axisLine: {
                    show: true,// 是否显示仪表盘轴线(轮廓线),默认 true。
                    lineStyle: { // 属性lineStyle控制线条样式
                        shadowBlur: 10,             //(发光效果)图形阴影的模糊大小。该属性配合 shadowColor,shadowOffsetX, shadowOffsetY 一起设置图形的阴影效果。
                        shadowColor: "#fff",        //阴影颜色。支持的格式同color。
                        width: 12//表盘宽度
                    }
                }
            }]
        };
        option.series[0].data[0].value =(saleYearData["completeValue"]*100).toFixed(2);
            myChart2.setOption(option, true);

    }
    /**
     *月度订单+合同额统计图
     */
    function showHistogramSale(listSalePlan,listSaleComplete,selHood) {
        let myChartStat = echarts.init(document.getElementById('statistical'));
        let text='';
        if(selHood==='订单+合同'){
            text='月度订单+合同额';
        }
        if(selHood==='订单'){
            text='月度订单额';
        }
        if(selHood==='合同'){
            text='月度合同额';
        }
        let optionStat = {
            title: {
                text: text,
                textStyle: {
                    color: "#fff",

                }
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['计划值', '完成值'],
                textStyle: {
                    color: '#fff'          // 图例文字颜色
                }
            },
            toolbox: {
                show: true,
                feature: {
                    dataView: {show: true, readOnly: false},
                    magicType: {show: true, type: ['line', 'bar']},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            calculable: true,
            xAxis: [
                {
                    type: 'category',
                    data: ['一月', '', '三月', '', '五月', '', '七月', '', '九月', '', '十一月', ''],
                    axisLabel: {
                        textStyle: {
                            color: '#fff',//坐标值得具体的颜色
                        }
                    }
                }
            ],
            yAxis: [
                {
                    type: 'value',
                    axisLabel: {
                        textStyle: {
                            color: '#fff',//坐标值得具体的颜色
                        }
                    }
                }
            ],
            series: [
                {
                    name: '计划值',
                    type: 'bar',
                    data: listSalePlan,
                    itemStyle: {   //配置样式，设置每个柱子的颜色
                        normal: {
                            color: '#0070A8'
                        }
                    }
                },
                {
                    name: '完成值',
                    type: 'bar',
                    data: listSaleComplete,
                    itemStyle: {   //配置样式，设置每个柱子的颜色
                        normal: {
                            color: '#E5323E'
                        }
                    }
                }
            ]
        };
        myChartStat.setOption(optionStat);
    }
    /**
     * 本月回款完成仪表盘
     */
    function showInstrumentPanelRec1(receiveMonthData){
        // 基于准备好的dom，初始化echarts实例
        let myChart3 = echarts.init(document.getElementById('main3'));
        // 指定图表的配置项和数据
        let option={
            tooltip: {
                formatter: "{a} <br/>{b} : {c}%"
            },
            toolbox: {
                feature: {
                    restore: {},
                    saveAsImage: {}
                }
            },
            series: [{
                name: '完成额',
                type: 'gauge',
                detail: {
                    offsetCenter: [0, "80%"],    //设置仪表盘下方显示内容位置
                    formatter: '{value}%',
                    textStyle: {color: 'white', fontSize: 20, top: 10}
                },
                title: {               //设置仪表盘中间显示文字样式
                    textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                        fontSize: 10,
                        color: "#4488BB",
                        fontStyle: 'italic',
                    }
                },
                //data: [{value: data.dianasReceiPlan, name: '回款'}],
                data: [{ value:0, name: '回款' }],
                center: ["47%", "45%"], // 默认全局居中
                splitLine: {           //分割线样式（及10、20等长线样式）
                    length: 15,
                    lineStyle: {            // 分隔线样式。
                        color: "#eee",              //线的颜色,默认 #eee。
                        opacity: 1,                 //图形透明度。支持从 0 到 1 的数字，为 0 时不绘制该图形。
                        width: 2,                   //线度,默认 2。
                        type: "solid",              //线的类型,默认 solid。 此外还有 dashed,dotted
                        shadowBlur: 10,             //(发光效果)图形阴影的模糊大小。该属性配合 shadowColor,shadowOffsetX, shadowOffsetY 一起设置图形的阴影效果。
                        shadowColor: "#fff",        //阴影颜色。支持的格式同color。
                    }
                },
                pointer: { //指针样式
                    length: '80%'
                },
                axisLine: {
                    show: true,// 是否显示仪表盘轴线(轮廓线),默认 true。
                    lineStyle: { // 属性lineStyle控制线条样式
                        shadowBlur: 10,             //(发光效果)图形阴影的模糊大小。该属性配合 shadowColor,shadowOffsetX, shadowOffsetY 一起设置图形的阴影效果。
                        shadowColor: "#fff",        //阴影颜色。支持的格式同color。
                        width: 12//表盘宽度
                    }
                }
            }]
        };

            option.series[0].data[0].value =(receiveMonthData["completeValue"]*100).toFixed(2);
            myChart3.setOption(option, true);

    }
    /**
     * 本季回款完成仪表盘
     */
    function showInstrumentPanelRec2(receiveQuarterData){
        // 基于准备好的dom，初始化echarts实例
        let myChart4 = echarts.init(document.getElementById('main4'));
        // 指定图表的配置项和数据
        let option={
            tooltip: {
                formatter: "{a} <br/>{b} : {c}%"
            },
            toolbox: {
                feature: {
                    restore: {},
                    saveAsImage: {}
                }
            },
            series: [{
                name: '完成额',
                type: 'gauge',
                detail: {
                    offsetCenter: [0, "80%"],    //设置仪表盘下方显示内容位置
                    formatter: '{value}%',
                    textStyle: {color: 'white', fontSize: 20, top: 10}
                },
                title: {               //设置仪表盘中间显示文字样式
                    textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                        fontSize: 10,
                        color: "#4488BB",
                        fontStyle: 'italic',
                    }
                },
                //data: [{value: data.seasonReceiPlan, name: '回款'}],
                data: [{ value:0, name: '回款' }],
                center: ["47%", "45%"], // 默认全局居中
                splitLine: {           //分割线样式（及10、20等长线样式）
                    length: 15,
                    lineStyle: {            // 分隔线样式。
                        color: "#eee",              //线的颜色,默认 #eee。
                        opacity: 1,                 //图形透明度。支持从 0 到 1 的数字，为 0 时不绘制该图形。
                        width: 2,                   //线度,默认 2。
                        type: "solid",              //线的类型,默认 solid。 此外还有 dashed,dotted
                        shadowBlur: 10,             //(发光效果)图形阴影的模糊大小。该属性配合 shadowColor,shadowOffsetX, shadowOffsetY 一起设置图形的阴影效果。
                        shadowColor: "#fff",        //阴影颜色。支持的格式同color。
                    }
                },
                pointer: { //指针样式
                    length: '80%'
                },
                axisLine: {
                    show: true,// 是否显示仪表盘轴线(轮廓线),默认 true。
                    lineStyle: { // 属性lineStyle控制线条样式
                        shadowBlur: 10,             //(发光效果)图形阴影的模糊大小。该属性配合 shadowColor,shadowOffsetX, shadowOffsetY 一起设置图形的阴影效果。
                        shadowColor: "#fff",        //阴影颜色。支持的格式同color。
                        width: 12//表盘宽度
                    }
                }
            }]
        };


            option.series[0].data[0].value =(receiveQuarterData["completeValue"]*100).toFixed(2);
            myChart4.setOption(option, true);

    }
    /**
     * 本年回款完成仪表盘
     */
    function showInstrumentPanelRec3(receiveYearData){
        // 基于准备好的dom，初始化echarts实例
        let myChart5 = echarts.init(document.getElementById('main5'));
        // 指定图表的配置项和数据
        let option ={
            tooltip: {
                formatter: "{a} <br/>{b} : {c}%"
            },
            toolbox: {
                feature: {
                    restore: {},
                    saveAsImage: {}
                }
            },
            series: [{
                name: '完成额',
                type: 'gauge',
                detail: {
                    offsetCenter: [0, "80%"],    //设置仪表盘下方显示内容位置
                    formatter: '{value}%',
                    textStyle: {color: 'white', fontSize: 20, top: 10}
                },
                title: {               //设置仪表盘中间显示文字样式
                    textStyle: {       // 其余属性默认使用全局文本样式，详见TEXTSTYLE
                        fontSize: 10,
                        color: "#4488BB",
                        fontStyle: 'italic',
                    }
                },
                //data: [{value: data.yearReceiPlan, name: '回款'}],
                data: [{ value:0, name: '回款' }],
                center: ["47%", "45%"], // 默认全局居中
                splitLine: {           //分割线样式（及10、20等长线样式）
                    length: 15,
                    lineStyle: {            // 分隔线样式。
                        color: "#eee",              //线的颜色,默认 #eee。
                        opacity: 1,                 //图形透明度。支持从 0 到 1 的数字，为 0 时不绘制该图形。
                        width: 2,                   //线度,默认 2。
                        type: "solid",              //线的类型,默认 solid。 此外还有 dashed,dotted
                        shadowBlur: 10,             //(发光效果)图形阴影的模糊大小。该属性配合 shadowColor,shadowOffsetX, shadowOffsetY 一起设置图形的阴影效果。
                        shadowColor: "#fff",        //阴影颜色。支持的格式同color。
                    }
                },
                pointer: { //指针样式
                    length: '80%'
                },
                axisLine: {
                    show: true,// 是否显示仪表盘轴线(轮廓线),默认 true。
                    lineStyle: { // 属性lineStyle控制线条样式
                        shadowBlur: 10,             //(发光效果)图形阴影的模糊大小。该属性配合 shadowColor,shadowOffsetX, shadowOffsetY 一起设置图形的阴影效果。
                        shadowColor: "#fff",        //阴影颜色。支持的格式同color。
                        width: 12//表盘宽度
                    }
                }
            }]
        };
            option.series[0].data[0].value =(receiveYearData["completeValue"]*100).toFixed(2);
            myChart5.setOption(option, true);

    }
    /**
     * 月度回款额统计图
     */
    function showHistogramRec(listReceivePlan,listReceiveComplete) {
        let myChartStat1 = echarts.init(document.getElementById('statistical1'));
        let optionStat1 = {
            title: {
                text: '月度回款额',
                textStyle: {
                    color: "#fff",

                }
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['计划值', '完成值'],
                textStyle: {
                    color: '#fff'          // 图例文字颜色
                }
            },
            toolbox: {
                show: true,
                feature: {
                    dataView: {show: true, readOnly: false},
                    magicType: {show: true, type: ['line', 'bar']},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            calculable: true,
            xAxis: [
                {
                    type: 'category',
                    data: ['一月', '', '三月', '', '五月', '', '七月', '', '九月', '', '十一月', ''],
                    axisLabel: {
                        textStyle: {
                            color: '#fff',//坐标值得具体的颜色
                        }
                    }
                }
            ],
            yAxis: [
                {
                    type: 'value',
                    data: [0, 0.2, 0.4, 0.6, 0.8, 1],
                    axisLabel: {
                        textStyle: {
                            color: '#fff',//坐标值得具体的颜色
                        }
                    }
                }
            ],
            series: [
                {
                    name: '计划值',
                    type: 'bar',
                    data:listReceivePlan,
                    itemStyle: {   //配置样式，设置每个柱子的颜色
                        normal: {
                            color: '#0070A8'
                        }
                    }
                },
                {
                    name: '完成值',
                    type: 'bar',
                    data: listReceiveComplete,
                    itemStyle: {   //配置样式，设置每个柱子的颜色
                        normal: {
                            color: '#E5323E'
                        }
                    }
                }
            ]
        };
        myChartStat1.setOption(optionStat1);
    }

    /**
     *销售预测漏斗图
     */
    function showSaleForecasting(listSaleForecasting){
        // 基于准备好的容器(这里的容器是id为chart1的div)，初始化echarts实例
        let chart1 = echarts.init(document.getElementById("chart1"));

        // 指定图表的配置项和数据
        let optionChar = {
            title: {
                text: '销售预测',
                textStyle: {
                    color: "#fff",
                }
            },
            tooltip: {
                trigger: 'item',
                formatter: "{a} <br/>{b} : {c}%"
            },
            toolbox: {
                feature: {
                    dataView: {readOnly: false},
                    restore: {},
                    saveAsImage: {}
                }
            },
            // legend: {
            //     data: ['展现','点击','访问','咨询','订单'],
            //     textStyle: {
            //         color: '#fff'          // 图例文字颜色
            //     }
            // },

            series: [
                {
                    name: '销售机会',
                    type: 'funnel',
                    left: '10%',
                    top: 60,
                    //x2: 80,
                    bottom: 60,
                    width: '80%',
                    // height: {totalHeight} - y - y2,
                    min: 0,
                    max: 100,
                    minSize: '0%',
                    maxSize: '100%',
                    sort: 'descending',
                    gap: 2,
                    label: {
                        show: true,
                        position: 'inside'
                    },
                    labelLine: {
                        length: 10,
                        lineStyle: {
                            width: 1,
                            type: 'solid'
                        }
                    },
                    itemStyle: {
                        borderColor: '#fff',
                        borderWidth: 1
                    },
                    emphasis: {
                        label: {
                            fontSize: 20
                        }
                    },
                    data: [
                        {value: 0, name: '成功('+listSaleForecasting[5]["opportunitiesNumber"]+'个;合计:'+listSaleForecasting[5]["summation"]+')'},
                        {value: 20, name: '合同签订('+listSaleForecasting[4]["opportunitiesNumber"]+'个;合计:'+listSaleForecasting[4]["summation"]+')'},
                        {value: 40, name: '商务谈判('+listSaleForecasting[3]["opportunitiesNumber"]+'个;合计:'+listSaleForecasting[3]["summation"]+')'},
                        {value: 60, name: '方案制定('+listSaleForecasting[2]["opportunitiesNumber"]+'个;合计:'+listSaleForecasting[2]["summation"]+')'},
                        {value: 80, name: '需求分析('+listSaleForecasting[1]["opportunitiesNumber"]+'个;合计:'+listSaleForecasting[1]["summation"]+')'},
                        {value: 100, name: '初步接触('+listSaleForecasting[0]["opportunitiesNumber"]+'个;合计:'+listSaleForecasting[0]["summation"]+')'}
                    ]
                }
            ]
        };

        // 使用刚指定的配置项和数据显示图表
        chart1.setOption(optionChar)
    }

    /**
     * 每月销售勤奋度
     */
    function showSaleDiligent(listSales1,listSales2,listSales3,listSales4,listSales5,listSales6){
        let myChartDiligence = echarts.init(document.getElementById('diligence'));
        let optionDil = {
            title: {
                text: '每月销售勤奋度',
                textStyle: {
                    color: "#fff",

                }
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: ['机会跟进数', '线索跟进数', '客户跟进数', '机会增加数', '线索增加数', '客户增加数'],
                textStyle: {
                    color: '#fff'          // 图例文字颜色
                }
            },
            toolbox: {
                show: true,
                feature: {
                    dataView: {show: true, readOnly: false},
                    magicType: {show: true, type: ['line', 'bar']},
                    restore: {show: true},
                    saveAsImage: {show: true}
                }
            },
            calculable: true,
            xAxis: [
                {
                    type: 'category',
                    data: ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月'],
                    axisLabel: {
                        textStyle: {
                            color: '#fff',//坐标值得具体的颜色
                        }
                    }
                }
            ],
            yAxis: [
                {
                    type: 'value',
                    data: [0, 0.2, 0.4, 0.6, 0.8, 1],
                    axisLabel: {
                        textStyle: {
                            color: '#fff',//坐标值得具体的颜色
                        }
                    }
                }
            ],
            series: [
                {
                    name: '机会跟进数',
                    type: 'bar',
                    data: listSales1,
                    itemStyle: {   //配置样式，设置每个柱子的颜色
                        normal: {
                            color:'#2D2DDF'
                        }
                    }
                },
                {
                    name: '线索跟进数',
                    type: 'bar',
                    data: listSales2,
                    itemStyle: {   //配置样式，设置每个柱子的颜色
                        normal: {
                            color:'#0066FF'
                        }
                    }
                },
                {
                    name: '客户跟进数',
                    type: 'bar',
                    data: listSales3,
                    itemStyle: {   //配置样式，设置每个柱子的颜色
                        normal: {
                            color:'#00CCFF'
                        }
                    }
                },
                {
                    name: '机会增加数',
                    type: 'bar',
                    data: listSales4,
                    itemStyle: {   //配置样式，设置每个柱子的颜色
                        normal: {
                            color:'#006600'
                        }
                    }
                },
                {
                    name: '线索增加数',
                    type: 'bar',
                    data: listSales5,
                    itemStyle: {   //配置样式，设置每个柱子的颜色
                        normal: {
                            color:'#2DCA2D'
                        }
                    }
                },
                {
                    name: '客户增加数',
                    type: 'bar',
                    data: listSales6,
                    itemStyle: {   //配置样式，设置每个柱子的颜色
                        normal: {
                            color:'#2DDF2D'
                        }
                    }
                },

            ]
        };
        myChartDiligence.setOption(optionDil);
    }

</script>
</body>
